## Yandex shri 2015 tests

### Задача 2

#### Условие

Существует API, которое умеет отвечать по трём URL: /countries, /cities и /populations. Клиентское приложение подсчитывает численность населения в Африке. Запросы друг от друга не зависят. Чтобы браузер пользователя не простаивал, клиентскому приложению важно уметь делать все три запроса одновременно. Реализацией API является функция getData(url, callback), которая принимает строку с URL запроса и функцию обратного вызова. В случае ошибки в callback первым аргументом будет передана строка ошибки, в случае успеха вторым аргументом будет передан ответ API.

Вам досталась реализация клиентского приложения, которое должно решать описанную выше задачу. Но в коде приложения есть ошибки, из-за которых фактический результат работы отличается от ожидаемого.

Как должно быть: приложение выводит в консоль суммарную популяцию в Африке.
Как на самом деле: приложение не выводит в консоль ничего.

#### Задание

* Найдите ошибку в коде приложения, из-за которой реальный результат работы отличается от ожидаемого. Опишите, как эта ошибка могла возникнуть и как её избежать в будущем.

* Добавьте в приложение новую возможность — диалог с пользователем. Приложение спрашивает название страны или города, а затем показывает численность населения. Для диалога можно использовать window.prompt.

#### Решение

* Проблема кода была в том что цикл for не создает скоп для каждого прохода и в момент выполнения callback переменная request будет всегда ссылаться на requests[3]. Простой способ починить - обернуть тело цикла в самовызывающуюся функцию. Как избежать? - не писать такой странный код.

* Я переписал код на более читаемый и лучше тестируемый. Поиск слова осуществляется сначала в городах, затем в странах а потом в континентах. В случае удачи поиск по более крупным сущностям не производится.

http://pofigizm.github.io/shri-tests/api.html
